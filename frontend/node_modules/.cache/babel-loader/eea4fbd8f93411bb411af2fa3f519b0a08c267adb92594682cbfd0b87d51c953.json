{"ast":null,"code":"import _objectSpread from \"C:/Users/Izes/Documents/git/Medavie/smart-home/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"C:/Users/Izes/Documents/git/Medavie/smart-home/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Izes/Documents/git/Medavie/smart-home/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport axios from 'axios';\nexport default {\n  name: 'ApplianceList',\n  data: function data() {\n    return {\n      appliances: [],\n      showAddDialog: false,\n      valid: false,\n      newAppliance: {\n        name: '',\n        isOn: false\n      }\n    };\n  },\n  methods: {\n    fetchAppliances: function fetchAppliances() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get('/api/v1/appliances');\n            case 3:\n              response = _context.sent;\n              _this.appliances = response.data;\n              _context.next = 10;\n              break;\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('Error fetching appliances:', _context.t0);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 7]]);\n      }))();\n    },\n    toggleAppliance: function toggleAppliance(appliance) {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var updatedAppliance;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              updatedAppliance = _objectSpread(_objectSpread({}, appliance), {}, {\n                isOn: !appliance.isOn\n              });\n              _context2.next = 4;\n              return axios.put(\"/api/v1/appliances/\".concat(appliance.id), updatedAppliance);\n            case 4:\n              _context2.next = 6;\n              return _this2.fetchAppliances();\n            case 6:\n              _context2.next = 12;\n              break;\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error('Error toggling appliance:', _context2.t0);\n              appliance.isOn = !appliance.isOn; // Revert the switch if the request fails\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 8]]);\n      }))();\n    },\n    updateAppliance: function updateAppliance(appliance) {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.put(\"/api/v1/appliances/\".concat(appliance.id), appliance);\n            case 3:\n              _context3.next = 5;\n              return _this3.fetchAppliances();\n            case 5:\n              _context3.next = 10;\n              break;\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.error('Error updating appliance:', _context3.t0);\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 7]]);\n      }))();\n    },\n    addAppliance: function addAppliance() {\n      var _this4 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return axios.post('/api/v1/appliances', {\n                name: _this4.newAppliance.name,\n                isOn: false\n              });\n            case 3:\n              response = _context4.sent;\n              if (!(response.status === 200)) {\n                _context4.next = 10;\n                break;\n              }\n              _this4.showAddDialog = false;\n              _this4.newAppliance = {\n                name: '',\n                isOn: false\n              };\n              _context4.next = 9;\n              return _this4.fetchAppliances();\n            case 9:\n              alert('Light added successfully!');\n            case 10:\n              _context4.next = 16;\n              break;\n            case 12:\n              _context4.prev = 12;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.error('Error adding appliance:', _context4.t0);\n              if (_context4.t0.code === 'ERR_NETWORK') {\n                alert('Cannot connect to the server. Please make sure the backend is running.');\n              } else {\n                alert('Failed to add light. Please try again.');\n              }\n            case 16:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[0, 12]]);\n      }))();\n    }\n  },\n  mounted: function mounted() {\n    this.fetchAppliances();\n  }\n};","map":{"version":3,"names":["axios","name","data","appliances","showAddDialog","valid","newAppliance","isOn","methods","fetchAppliances","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","t0","console","error","stop","toggleAppliance","appliance","_this2","_callee2","updatedAppliance","_callee2$","_context2","_objectSpread","put","concat","id","updateAppliance","_this3","_callee3","_callee3$","_context3","addAppliance","_this4","_callee4","_callee4$","_context4","post","status","alert","code","mounted"],"sources":["C:\\Users\\Izes\\Documents\\git\\Medavie\\smart-home\\frontend\\src\\components\\ApplianceList.vue"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <v-row>\r\n      <v-col cols=\"12\">\r\n        <h1 class=\"text-h4 mb-4\">Smart Home Appliances</h1>\r\n        \r\n        <!-- Add New Appliance Button -->\r\n        <v-btn color=\"primary\" class=\"mb-4\" @click=\"showAddDialog = true\">\r\n          <v-icon left>mdi-plus</v-icon>\r\n          Add New Appliance\r\n        </v-btn>\r\n\r\n        <!-- Appliance List -->\r\n        <v-row>\r\n          <v-col v-for=\"appliance in appliances\" :key=\"appliance.id\" cols=\"12\" md=\"6\" lg=\"4\">\r\n            <v-card>\r\n              <v-card-title>\r\n                {{ appliance.name }}\r\n                <v-spacer></v-spacer>\r\n                <v-switch\r\n                  v-model=\"appliance.isOn\"\r\n                  :color=\"appliance.isOn ? 'success' : 'grey'\"\r\n                  @change=\"toggleAppliance(appliance)\"\r\n                ></v-switch>\r\n              </v-card-title>\r\n              \r\n              <v-card-text>\r\n                <div class=\"text-subtitle-1\">Status: {{ appliance.isOn ? 'On' : 'Off' }}</div>\r\n              </v-card-text>\r\n            </v-card>\r\n          </v-col>\r\n        </v-row>\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <!-- Add Appliance Dialog -->\r\n    <v-dialog v-model=\"showAddDialog\" max-width=\"500px\">\r\n      <v-card>\r\n        <v-card-title>Add New Light</v-card-title>\r\n        <v-card-text>\r\n          <v-form ref=\"form\" v-model=\"valid\">\r\n            <v-text-field\r\n              v-model=\"newAppliance.name\"\r\n              label=\"Name\"\r\n              required\r\n            ></v-text-field>\r\n          </v-form>\r\n        </v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn color=\"error\" text @click=\"showAddDialog = false\">Cancel</v-btn>\r\n          <v-btn color=\"primary\" :disabled=\"!valid\" @click=\"addAppliance\">Add</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'ApplianceList',\r\n  data() {\r\n    return {\r\n      appliances: [],\r\n      showAddDialog: false,\r\n      valid: false,\r\n      newAppliance: {\r\n        name: '',\r\n        isOn: false\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    async fetchAppliances() {\r\n      try {\r\n        const response = await axios.get('/api/v1/appliances');\r\n        this.appliances = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching appliances:', error);\r\n      }\r\n    },\r\n    async toggleAppliance(appliance) {\r\n      try {\r\n        const updatedAppliance = { ...appliance, isOn: !appliance.isOn };\r\n        await axios.put(`/api/v1/appliances/${appliance.id}`, updatedAppliance);\r\n        await this.fetchAppliances();\r\n      } catch (error) {\r\n        console.error('Error toggling appliance:', error);\r\n        appliance.isOn = !appliance.isOn; // Revert the switch if the request fails\r\n      }\r\n    },\r\n    async updateAppliance(appliance) {\r\n      try {\r\n        await axios.put(`/api/v1/appliances/${appliance.id}`, appliance);\r\n        await this.fetchAppliances();\r\n      } catch (error) {\r\n        console.error('Error updating appliance:', error);\r\n      }\r\n    },\r\n    async addAppliance() {\r\n      try {\r\n        const response = await axios.post('/api/v1/appliances', {\r\n          name: this.newAppliance.name,\r\n          isOn: false\r\n        });\r\n        \r\n        if (response.status === 200) {\r\n          this.showAddDialog = false;\r\n          this.newAppliance = { name: '', isOn: false };\r\n          await this.fetchAppliances();\r\n          alert('Light added successfully!');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error adding appliance:', error);\r\n        if (error.code === 'ERR_NETWORK') {\r\n          alert('Cannot connect to the server. Please make sure the backend is running.');\r\n        } else {\r\n          alert('Failed to add light. Please try again.');\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchAppliances();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.v-card {\r\n  margin-bottom: 16px;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}